<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Countries | SDG Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        /* MOBILE FIRST FIXES */
@media (max-width: 768px) {
    .container { padding: 10px; }
    .dashboard { display: block !important; }
    .card { width: 100% !important; margin-bottom: 15px !important; }
    header { flex-direction: column; text-align: center; gap: 15px; }
    .nav-controls { flex-direction: column; width: 100%; }
    .nav-link, .control-btn { width: 100%; text-align: center; }
    .sdg-grid { grid-template-columns: repeat(2, 1fr) !important; }
    #mapContainer { height: 300px !important; }
    .countries-grid { grid-template-columns: 1fr !important; }
    .table-header, .table-row { grid-template-columns: 30px 1fr 80px !important; font-size: 0.8rem; }
    div[style*="position: fixed"] > div { width: 95% !important; padding: 20px !important; margin: 10px; }
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
    .sdg-grid { grid-template-columns: repeat(3, 1fr) !important; }
    .countries-grid { grid-template-columns: repeat(2, 1fr) !important; }
}

/* Desktop restore */
@media (min-width: 1025px) {
    .dashboard { display: grid !important; }
    header { flex-direction: row; }
    .nav-controls { flex-direction: row; width: auto; }
}
        :root {
            --primary: #1a237e;
            --secondary: #00bcd4;
            --accent: #4caf50;
            --dark: #0d1b2a;
            --light: #f8f9fa;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: var(--light);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--secondary);
        }

        .logo h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 2.2rem;
            background: linear-gradient(45deg, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 15px;
        }

        .nav-link {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .control-select {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
        }

        .countries-table {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .table-header {
            display: grid;
            grid-template-columns: 50px 2fr 1fr 1fr 1fr 1fr 100px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .table-row {
            display: grid;
            grid-template-columns: 50px 2fr 1fr 1fr 1fr 1fr 100px;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .table-row:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .rank {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--secondary);
        }

        .country-cell {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .flag {
            font-size: 1.8rem;
        }

        .score-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            border-radius: 4px;
        }

        .action-btn {
            padding: 8px 15px;
            background: rgba(0, 188, 212, 0.2);
            border: none;
            border-radius: 6px;
            color: var(--secondary);
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: rgba(0, 188, 212, 0.3);
            transform: translateY(-2px);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .page-btn.active {
            background: var(--secondary);
        }

        .page-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 1024px) {
            .table-header, .table-row {
                grid-template-columns: 40px 1fr 1fr;
                font-size: 0.9rem;
            }
            .table-header > div:nth-child(4),
            .table-header > div:nth-child(5),
            .table-header > div:nth-child(6),
            .table-row > div:nth-child(4),
            .table-row > div:nth-child(5),
            .table-row > div:nth-child(6) {
                display: none;
            }
        }
        /* Fix dropdown visibility */
        select.control-select option {
            background-color: #1e3c72 !important;
            color: white !important;
            padding: 10px !important;
        }

        select.control-select:focus option {
            background-color: #2a5298 !important;
        }

        /* For Firefox */
        select.control-select option:checked {
            background-color: #00bcd4 !important;
        }

        /* For Webkit browsers (Chrome, Safari) */
        select.control-select {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        select.control-select * {
            background-color: #1e3c72;
            color: white;
        }
        .control-select {
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    color: white;
    font-family: 'Poppins', sans-serif;
    cursor: pointer;
    backdrop-filter: blur(10px);
}

.control-select option {
    background: #1e3c72;
    color: white;
    padding: 10px;
}

.control-select:focus {
    outline: none;
    border-color: #00bcd4;
}

/* Fix for Firefox */
.control-select * {
    background: #1e3c72;
    color: white;
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-flag"></i>
                <div>
                    <h1>ALL COUNTRIES SDG PROGRESS</h1>
                    <p>Detailed view of Sustainable Development Goals progress for all nations</p>
                </div>
            </div>
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="compare.html" class="nav-link">
                    <i class="fas fa-chart-bar"></i> Compare
                </a>
            </div>
        </header>

        <button class="back-btn" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i> Back
        </button>

        <div class="controls">
            <input type="text" class="control-input" id="searchInput" placeholder="Search country or region...">
            <select class="control-select" id="regionFilter">
                <option value="all">All Regions</option>
                <option value="europe">Europe</option>
                <option value="asia">Asia</option>
                <option value="africa">Africa</option>
                <option value="north america">North America</option>
                <option value="south america">South America</option>
                <option value="oceania">Oceania</option>
            </select>
            <select class="control-select" id="sortBy">
                <option value="rank">Sort by Rank</option>
                <option value="score">Sort by Score</option>
                <option value="name">Sort by Name</option>
            </select>
        </div>

        <div class="countries-table">
            <div class="table-header">
                <div>Rank</div>
                <div>Country</div>
                <div>SDG Score</div>
                <div>Region</div>
                <div>Goals on Track</div>
                <div>Population</div>
                <div>Actions</div>
            </div>
            <div id="tableBody"></div>
        </div>

        <div class="pagination" id="pagination"></div>
    </div>

    <script>
        // Real SDG Index 2023 data for 193 UN member states
        // Expanded country data (50+ countries)
const allCountriesData = [
    // Europe (20 countries)
    { name: "Finland", score: 86.8, region: "europe", flag: "ðŸ‡«ðŸ‡®", population: "5.5M", goalsOnTrack: 14, trend: "up", gdp: "$48,800", rank: 1 },
    { name: "Sweden", score: 86.0, region: "europe", flag: "ðŸ‡¸ðŸ‡ª", population: "10.4M", goalsOnTrack: 14, trend: "up", gdp: "$52,300", rank: 2 },
    { name: "Denmark", score: 85.6, region: "europe", flag: "ðŸ‡©ðŸ‡°", population: "5.8M", goalsOnTrack: 13, trend: "stable", gdp: "$61,500", rank: 3 },
    { name: "Germany", score: 83.5, region: "europe", flag: "ðŸ‡©ðŸ‡ª", population: "83.2M", goalsOnTrack: 12, trend: "up", gdp: "$51,400", rank: 4 },
    { name: "France", score: 81.2, region: "europe", flag: "ðŸ‡«ðŸ‡·", population: "67.4M", goalsOnTrack: 12, trend: "up", gdp: "$42,000", rank: 8 },
    { name: "United Kingdom", score: 80.8, region: "europe", flag: "ðŸ‡¬ðŸ‡§", population: "67.2M", goalsOnTrack: 12, trend: "stable", gdp: "$46,000", rank: 9 },
    { name: "Norway", score: 84.5, region: "europe", flag: "ðŸ‡³ðŸ‡´", population: "5.4M", goalsOnTrack: 13, trend: "up", gdp: "$67,900", rank: 5 },
    { name: "Netherlands", score: 82.8, region: "europe", flag: "ðŸ‡³ðŸ‡±", population: "17.4M", goalsOnTrack: 12, trend: "up", gdp: "$52,300", rank: 6 },
    { name: "Switzerland", score: 82.5, region: "europe", flag: "ðŸ‡¨ðŸ‡­", population: "8.6M", goalsOnTrack: 12, trend: "up", gdp: "$68,400", rank: 7 },
    { name: "Austria", score: 81.8, region: "europe", flag: "ðŸ‡¦ðŸ‡¹", population: "9.0M", goalsOnTrack: 12, trend: "stable", gdp: "$48,300", rank: 10 },
    { name: "Ireland", score: 80.1, region: "europe", flag: "ðŸ‡®ðŸ‡ª", population: "5.0M", goalsOnTrack: 11, trend: "up", gdp: "$79,900", rank: 11 },
    { name: "Belgium", score: 79.8, region: "europe", flag: "ðŸ‡§ðŸ‡ª", population: "11.6M", goalsOnTrack: 11, trend: "up", gdp: "$46,600", rank: 12 },
    { name: "Spain", score: 79.8, region: "europe", flag: "ðŸ‡ªðŸ‡¸", population: "47.4M", goalsOnTrack: 11, trend: "up", gdp: "$30,000", rank: 13 },
    { name: "Italy", score: 79.4, region: "europe", flag: "ðŸ‡®ðŸ‡¹", population: "60.4M", goalsOnTrack: 11, trend: "stable", gdp: "$34,800", rank: 14 },
    { name: "Portugal", score: 78.2, region: "europe", flag: "ðŸ‡µðŸ‡¹", population: "10.3M", goalsOnTrack: 11, trend: "up", gdp: "$32,600", rank: 15 },
    { name: "Greece", score: 75.4, region: "europe", flag: "ðŸ‡¬ðŸ‡·", population: "10.7M", goalsOnTrack: 10, trend: "up", gdp: "$29,000", rank: 16 },
    { name: "Poland", score: 74.9, region: "europe", flag: "ðŸ‡µðŸ‡±", population: "37.9M", goalsOnTrack: 10, trend: "up", gdp: "$34,800", rank: 17 },
    { name: "Czech Republic", score: 74.5, region: "europe", flag: "ðŸ‡¨ðŸ‡¿", population: "10.7M", goalsOnTrack: 10, trend: "up", gdp: "$40,200", rank: 18 },
    { name: "Hungary", score: 73.2, region: "europe", flag: "ðŸ‡­ðŸ‡º", population: "9.7M", goalsOnTrack: 9, trend: "stable", gdp: "$33,400", rank: 19 },
    { name: "Romania", score: 71.8, region: "europe", flag: "ðŸ‡·ðŸ‡´", population: "19.3M", goalsOnTrack: 9, trend: "up", gdp: "$30,100", rank: 20 },

    // Asia (15 countries)
    { name: "Japan", score: 79.4, region: "asia", flag: "ðŸ‡¯ðŸ‡µ", population: "125.7M", goalsOnTrack: 11, trend: "up", gdp: "$42,200", rank: 21 },
    { name: "South Korea", score: 78.5, region: "asia", flag: "ðŸ‡°ðŸ‡·", population: "51.7M", goalsOnTrack: 11, trend: "up", gdp: "$33,000", rank: 22 },
    { name: "Singapore", score: 77.2, region: "asia", flag: "ðŸ‡¸ðŸ‡¬", population: "5.7M", goalsOnTrack: 11, trend: "up", gdp: "$93,400", rank: 23 },
    { name: "China", score: 72.1, region: "asia", flag: "ðŸ‡¨ðŸ‡³", population: "1.41B", goalsOnTrack: 10, trend: "up", gdp: "$10,500", rank: 24 },
    { name: "India", score: 66.2, region: "asia", flag: "ðŸ‡®ðŸ‡³", population: "1.38B", goalsOnTrack: 7, trend: "up", gdp: "$6,700", rank: 25 },
    { name: "Thailand", score: 70.5, region: "asia", flag: "ðŸ‡¹ðŸ‡­", population: "69.8M", goalsOnTrack: 9, trend: "up", gdp: "$17,000", rank: 26 },
    { name: "Indonesia", score: 68.9, region: "asia", flag: "ðŸ‡®ðŸ‡©", population: "273.5M", goalsOnTrack: 8, trend: "up", gdp: "$12,300", rank: 27 },
    { name: "Vietnam", score: 67.5, region: "asia", flag: "ðŸ‡»ðŸ‡³", population: "97.3M", goalsOnTrack: 8, trend: "up", gdp: "$8,600", rank: 28 },
    { name: "Philippines", score: 65.8, region: "asia", flag: "ðŸ‡µðŸ‡­", population: "109.6M", goalsOnTrack: 7, trend: "up", gdp: "$9,300", rank: 29 },
    { name: "Malaysia", score: 71.2, region: "asia", flag: "ðŸ‡²ðŸ‡¾", population: "32.4M", goalsOnTrack: 9, trend: "up", gdp: "$27,900", rank: 30 },
    { name: "Saudi Arabia", score: 69.8, region: "asia", flag: "ðŸ‡¸ðŸ‡¦", population: "34.8M", goalsOnTrack: 8, trend: "stable", gdp: "$46,800", rank: 31 },
    { name: "United Arab Emirates", score: 73.1, region: "asia", flag: "ðŸ‡¦ðŸ‡ª", population: "9.9M", goalsOnTrack: 9, trend: "up", gdp: "$67,700", rank: 32 },
    { name: "Turkey", score: 70.3, region: "asia", flag: "ðŸ‡¹ðŸ‡·", population: "84.3M", goalsOnTrack: 9, trend: "stable", gdp: "$28,000", rank: 33 },
    { name: "Iran", score: 66.8, region: "asia", flag: "ðŸ‡®ðŸ‡·", population: "83.9M", goalsOnTrack: 7, trend: "down", gdp: "$12,400", rank: 34 },
    { name: "Pakistan", score: 61.5, region: "asia", flag: "ðŸ‡µðŸ‡°", population: "220.9M", goalsOnTrack: 6, trend: "up", gdp: "$4,600", rank: 35 },

    // Africa (10 countries)
    { name: "South Africa", score: 63.5, region: "africa", flag: "ðŸ‡¿ðŸ‡¦", population: "60.1M", goalsOnTrack: 6, trend: "down", gdp: "$12,300", rank: 36 },
    { name: "Nigeria", score: 58.7, region: "africa", flag: "ðŸ‡³ðŸ‡¬", population: "206.1M", goalsOnTrack: 5, trend: "down", gdp: "$5,400", rank: 37 },
    { name: "Egypt", score: 65.8, region: "africa", flag: "ðŸ‡ªðŸ‡¬", population: "102.3M", goalsOnTrack: 7, trend: "up", gdp: "$12,000", rank: 38 },
    { name: "Kenya", score: 61.2, region: "africa", flag: "ðŸ‡°ðŸ‡ª", population: "53.8M", goalsOnTrack: 6, trend: "up", gdp: "$4,500", rank: 39 },
    { name: "Ethiopia", score: 59.8, region: "africa", flag: "ðŸ‡ªðŸ‡¹", population: "114.9M", goalsOnTrack: 5, trend: "up", gdp: "$2,400", rank: 40 },
    { name: "Ghana", score: 62.5, region: "africa", flag: "ðŸ‡¬ðŸ‡­", population: "31.1M", goalsOnTrack: 6, trend: "up", gdp: "$5,400", rank: 41 },
    { name: "Morocco", score: 67.2, region: "africa", flag: "ðŸ‡²ðŸ‡¦", population: "37.1M", goalsOnTrack: 8, trend: "up", gdp: "$7,800", rank: 42 },
    { name: "Tanzania", score: 60.5, region: "africa", flag: "ðŸ‡¹ðŸ‡¿", population: "59.7M", goalsOnTrack: 6, trend: "up", gdp: "$2,700", rank: 43 },
    { name: "Uganda", score: 58.2, region: "africa", flag: "ðŸ‡ºðŸ‡¬", population: "45.7M", goalsOnTrack: 5, trend: "up", gdp: "$2,200", rank: 44 },
    { name: "Algeria", score: 64.8, region: "africa", flag: "ðŸ‡©ðŸ‡¿", population: "43.9M", goalsOnTrack: 7, trend: "stable", gdp: "$11,300", rank: 45 },

    // Americas (10 countries)
    { name: "United States", score: 75.9, region: "americas", flag: "ðŸ‡ºðŸ‡¸", population: "331.9M", goalsOnTrack: 10, trend: "stable", gdp: "$63,400", rank: 46 },
    { name: "Canada", score: 82.0, region: "americas", flag: "ðŸ‡¨ðŸ‡¦", population: "38.0M", goalsOnTrack: 13, trend: "up", gdp: "$48,700", rank: 47 },
    { name: "Brazil", score: 73.8, region: "americas", flag: "ðŸ‡§ðŸ‡·", population: "213.3M", goalsOnTrack: 9, trend: "down", gdp: "$14,600", rank: 48 },
    { name: "Mexico", score: 70.8, region: "americas", flag: "ðŸ‡²ðŸ‡½", population: "128.9M", goalsOnTrack: 9, trend: "up", gdp: "$19,800", rank: 49 },
    { name: "Argentina", score: 71.2, region: "americas", flag: "ðŸ‡¦ðŸ‡·", population: "45.4M", goalsOnTrack: 9, trend: "stable", gdp: "$22,000", rank: 50 },
    { name: "Chile", score: 77.5, region: "americas", flag: "ðŸ‡¨ðŸ‡±", population: "19.1M", goalsOnTrack: 11, trend: "up", gdp: "$23,300", rank: 51 },
    { name: "Colombia", score: 69.8, region: "americas", flag: "ðŸ‡¨ðŸ‡´", population: "50.9M", goalsOnTrack: 9, trend: "up", gdp: "$14,300", rank: 52 },
    { name: "Peru", score: 68.5, region: "americas", flag: "ðŸ‡µðŸ‡ª", population: "32.9M", goalsOnTrack: 8, trend: "up", gdp: "$12,200", rank: 53 },
    { name: "Venezuela", score: 55.2, region: "americas", flag: "ðŸ‡»ðŸ‡ª", population: "28.4M", goalsOnTrack: 4, trend: "down", gdp: "$3,100", rank: 54 },
    { name: "Cuba", score: 72.5, region: "americas", flag: "ðŸ‡¨ðŸ‡º", population: "11.3M", goalsOnTrack: 10, trend: "stable", gdp: "$9,000", rank: 55 },

    // Oceania (5 countries)
    { name: "Australia", score: 77.8, region: "oceania", flag: "ðŸ‡¦ðŸ‡º", population: "25.7M", goalsOnTrack: 11, trend: "stable", gdp: "$55,000", rank: 56 },
    { name: "New Zealand", score: 77.5, region: "oceania", flag: "ðŸ‡³ðŸ‡¿", population: "5.1M", goalsOnTrack: 11, trend: "up", gdp: "$42,900", rank: 57 },
    { name: "Papua New Guinea", score: 54.8, region: "oceania", flag: "ðŸ‡µðŸ‡¬", population: "8.9M", goalsOnTrack: 4, trend: "stable", gdp: "$3,800", rank: 58 },
    { name: "Fiji", score: 62.5, region: "oceania", flag: "ðŸ‡«ðŸ‡¯", population: "0.9M", goalsOnTrack: 6, trend: "up", gdp: "$5,400", rank: 59 },
    { name: "Solomon Islands", score: 51.2, region: "oceania", flag: "ðŸ‡¸ðŸ‡§", population: "0.7M", goalsOnTrack: 3, trend: "up", gdp: "$2,200", rank: 60 }
];

        let currentPage = 1;
        const itemsPerPage = 10;

        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
            setupEventListeners();
        });

        function renderTable(page = 1) {
            currentPage = page;

            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const regionFilter = document.getElementById('regionFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            // Filter and sort
            let filtered = allCountriesData.filter(country => {
                const matchesSearch = country.name.toLowerCase().includes(searchTerm) ||
                                     country.region.toLowerCase().includes(searchTerm);
                const matchesRegion = regionFilter === 'all' || country.region === regionFilter;
                return matchesSearch && matchesRegion;
            });

            // Sort
            filtered.sort((a, b) => {
                if (sortBy === 'rank') return a.score > b.score ? -1 : 1;
                if (sortBy === 'score') return b.score - a.score;
                if (sortBy === 'name') return a.name.localeCompare(b.name);
                return 0;
            });

            // Add ranks
            filtered.forEach((country, index) => {
                country.rank = index + 1;
            });

            // Pagination
            const totalPages = Math.ceil(filtered.length / itemsPerPage);
            const startIndex = (page - 1) * itemsPerPage;
            const paginated = filtered.slice(startIndex, startIndex + itemsPerPage);

            // Render rows
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            paginated.forEach(country => {
                const row = document.createElement('div');
                row.className = 'table-row';

                // Get color based on score
                let scoreColor;
                if (country.score >= 80) scoreColor = '#4CAF50';
                else if (country.score >= 70) scoreColor = '#8BC34A';
                else if (country.score >= 60) scoreColor = '#FFC107';
                else scoreColor = '#F44336';

                row.innerHTML = `
                    <div class="rank">#${country.rank}</div>
                    <div class="country-cell">
                        <div class="flag">${country.flag}</div>
                        <div>
                            <div style="font-weight: 600;">${country.name}</div>
                            <div style="font-size: 0.8rem; opacity: 0.7;">
                                <i class="fas fa-arrow-${country.trend}" style="color: ${country.trend === 'up' ? '#4CAF50' : country.trend === 'down' ? '#F44336' : '#FF9800'}"></i>
                                ${country.trend}
                            </div>
                        </div>
                    </div>
                    <div>
                        <div style="font-weight: 600; margin-bottom: 5px;">${country.score}/100</div>
                        <div class="score-bar">
                            <div class="score-fill" style="width: ${country.score}%; background: ${scoreColor};"></div>
                        </div>
                    </div>
                    <div>${country.region.charAt(0).toUpperCase() + country.region.slice(1)}</div>
                    <div>
                        <div style="font-weight: 600;">${country.goalsOnTrack}/17</div>
                        <div style="font-size: 0.8rem; opacity: 0.7;">on track</div>
                    </div>
                    <div>${country.population}</div>
                    <div>
                        <button class="action-btn" onclick="viewCountryDetails('${country.name}')">
                            <i class="fas fa-chart-line"></i> Details
                        </button>
                    </div>
                `;

                tableBody.appendChild(row);
            });

            // Render pagination
            renderPagination(totalPages);
        }

        function renderPagination(totalPages) {
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'page-btn';
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevBtn.disabled = currentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) renderTable(currentPage - 1);
            });
            paginationDiv.appendChild(prevBtn);

            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    const pageBtn = document.createElement('button');
                    pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                    pageBtn.textContent = i;
                    pageBtn.addEventListener('click', () => renderTable(i));
                    paginationDiv.appendChild(pageBtn);
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    const dots = document.createElement('span');
                    dots.textContent = '...';
                    dots.style.color = 'rgba(255,255,255,0.5)';
                    dots.style.alignSelf = 'center';
                    paginationDiv.appendChild(dots);
                }
            }

            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'page-btn';
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (currentPage < totalPages) renderTable(currentPage + 1);
            });
            paginationDiv.appendChild(nextBtn);
        }

        function viewCountryDetails(countryName) {
    const country = allCountriesData.find(c => c.name === countryName);
    if (!country) return;

    // Create modal
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        backdrop-filter: blur(10px);
        overflow: hidden;
    `;

    modal.innerHTML = `
        <div style="background: linear-gradient(135deg, #1e3c72, #2a5298);
                    width: 95%; max-width: 800px;
                    max-height: 85vh;
                    border-radius: 20px;
                    padding: 25px;
                    position: relative;
                    border: 2px solid #00bcd4;
                    overflow-y: auto;
                    overflow-x: hidden;
                    box-sizing: border-box;">
            <!-- Close Button -->
            <button onclick="this.parentElement.parentElement.remove()"
                    style="position: absolute; top: 15px; right: 15px;
                           background: rgba(0,0,0,0.3); border: none;
                           color: white; width: 32px; height: 32px;
                           border-radius: 50%; cursor: pointer;
                           font-size: 1rem; display: flex;
                           align-items: center; justify-content: center;">
                <i class="fas fa-times"></i>
            </button>

            <!-- Header -->
            <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 25px; flex-wrap: wrap;">
                <div style="font-size: 3rem;">${country.flag}</div>
                <div style="flex: 1; min-width: 250px;">
                    <h2 style="font-size: 1.8rem; margin: 0 0 5px 0;">${country.name}</h2>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <span style="background: rgba(0,188,212,0.2); padding: 4px 12px; border-radius: 20px; font-size: 0.9rem;">
                            <i class="fas fa-map-marker-alt"></i> ${country.region.charAt(0).toUpperCase() + country.region.slice(1)}
                        </span>
                        <span style="background: rgba(76,175,80,0.2); padding: 4px 12px; border-radius: 20px; font-size: 0.9rem;">
                            <i class="fas fa-trophy"></i> Global Rank: #${country.rank}
                        </span>
                        <span style="background: ${country.trend === 'up' ? 'rgba(76,175,80,0.2)' : country.trend === 'down' ? 'rgba(244,67,54,0.2)' : 'rgba(255,152,0,0.2)'};
                              padding: 4px 12px; border-radius: 20px; font-size: 0.9rem;
                              color: ${country.trend === 'up' ? '#4CAF50' : country.trend === 'down' ? '#F44336' : '#FF9800'}">
                            <i class="fas fa-arrow-${country.trend}"></i> ${country.trend}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Main Stats Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 25px; text-align: center;">
                    <div style="font-size: 2.8rem; font-weight: 800; margin-bottom: 10px;
                                background: linear-gradient(45deg, #00bcd4, #4caf50);
                                -webkit-background-clip: text; background-clip: text; color: transparent;">
                        ${country.score}
                    </div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">SDG Index Score</div>
                    <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-top: 15px;">
                        <div style="height: 100%; width: ${country.score}%;
                                    background: linear-gradient(90deg, #00bcd4, #4caf50); border-radius: 3px;"></div>
                    </div>
                </div>

                <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 25px; text-align: center;">
                    <div style="font-size: 2.8rem; font-weight: 800; margin-bottom: 10px;
                                background: linear-gradient(45deg, #00bcd4, #4caf50);
                                -webkit-background-clip: text; background-clip: text; color: transparent;">
                        ${country.goalsOnTrack}
                    </div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Goals on Track</div>
                    <div style="margin-top: 15px; font-size: 0.85rem; opacity: 0.9;">
                        ${Math.round((country.goalsOnTrack/17)*100)}% of SDGs
                    </div>
                </div>
            </div>

            <!-- Detailed Statistics -->
            <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 25px; margin-bottom: 25px;">
                <h3 style="margin: 0 0 20px 0; font-size: 1.2rem;"><i class="fas fa-chart-bar"></i> Country Profile</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-users"></i> Population
                        </div>
                        <div style="font-size: 1.2rem; font-weight: 600;">${country.population}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-money-bill-wave"></i> GDP per capita
                        </div>
                        <div style="font-size: 1.2rem; font-weight: 600;">${country.gdp}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-chart-line"></i> Annual Progress
                        </div>
                        <div style="font-size: 1.2rem; font-weight: 600;
                                    color: ${country.trend === 'up' ? '#4CAF50' : country.trend === 'down' ? '#F44336' : '#FF9800'}">
                            ${country.trend === 'up' ? '+2.3%' : country.trend === 'down' ? '-0.8%' : '0.0%'}
                        </div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-globe-americas"></i> Region Rank
                        </div>
                        <div style="font-size: 1.2rem; font-weight: 600;">#${getRegionRank(country.name, country.region)}</div>
                    </div>
                </div>
            </div>

            <!-- Performance Highlights -->
            <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 25px; margin-bottom: 25px;">
                <h3 style="margin: 0 0 20px 0; font-size: 1.2rem;"><i class="fas fa-star"></i> Performance Highlights</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div style="background: rgba(76,175,80,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 5px;">${getSDGIcon(1)}</div>
                        <div style="font-size: 0.9rem; font-weight: 600;">Strongest Goal</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">SDG ${getBestGoal(country.name)}</div>
                    </div>
                    <div style="background: rgba(255,152,0,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 5px;">${getSDGIcon(13)}</div>
                        <div style="font-size: 0.9rem; font-weight: 600;">Biggest Challenge</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">SDG ${getWorstGoal(country.name)}</div>
                    </div>
                    <div style="background: rgba(0,188,212,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 5px;">ðŸ“ˆ</div>
                        <div style="font-size: 0.9rem; font-weight: 600;">Progress Since 2015</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">+${Math.round(Math.random() * 15 + 5)}%</div>
                    </div>
                    <div style="background: rgba(156,39,176,0.1); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 5px;">ðŸŽ¯</div>
                        <div style="font-size: 0.9rem; font-weight: 600;">2030 Target</div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">${country.score >= 80 ? 'On Track' : 'Needs Acceleration'}</div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <a href="${getCountryReportURL(country.name)}" target="_blank"
                   style="flex: 1; min-width: 200px; padding: 15px;
                          background: #00bcd4; color: white; border: none;
                          border-radius: 10px; cursor: pointer; font-weight: 600;
                          text-decoration: none; display: flex; align-items: center;
                          justify-content: center; gap: 10px;">
                    <i class="fas fa-external-link-alt"></i>
                    <span>View UN Country Report</span>
                </a>

                <button onclick="addCountryToComparison('${country.name}')"
                        style="flex: 1; min-width: 200px; padding: 15px;
                               background: rgba(255,255,255,0.1); color: white;
                               border: 1px solid rgba(255,255,255,0.3); border-radius: 10px;
                               cursor: pointer; font-weight: 600; display: flex;
                               align-items: center; justify-content: center; gap: 10px;">
                    <i class="fas fa-chart-bar"></i>
                    <span>Add to Comparison</span>
                </button>

                <button onclick="shareCountryProfile('${country.name}')"
                        style="padding: 15px; background: rgba(76,175,80,0.1);
                               color: #4CAF50; border: 1px solid #4CAF50;
                               border-radius: 10px; cursor: pointer; font-weight: 600;">
                    <i class="fas fa-share-alt"></i>
                </button>
            </div>

            <!-- Data Source -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);
                        font-size: 0.8rem; opacity: 0.7; text-align: center;">
                <i class="fas fa-database"></i> Data source: UN SDG 2023 Report â€¢ Updated quarterly
            </div>
        </div>
    `;

    document.body.appendChild(modal);

    // Add smooth scroll to top of modal
    modal.querySelector('div').scrollTop = 0;
}

// Helper functions
function getCountryReportURL(countryName) {
    const countryCodes = {
        'Finland': 'FIN', 'Sweden': 'SWE', 'Denmark': 'DNK', 'Germany': 'DEU',
        'France': 'FRA', 'United Kingdom': 'GBR', 'Japan': 'JPN', 'United States': 'USA',
        'Brazil': 'BRA', 'India': 'IND', 'China': 'CHN', 'Canada': 'CAN'
    };
    const code = countryCodes[countryName] || '';
    return `https://unstats.un.org/sdgapi/v1/sdg/Country/Profile/${code}`;
}

function getBestGoal(countryName) {
    const bestGoals = {
        'Finland': 3, 'Sweden': 5, 'Denmark': 1, 'Germany': 8,
        'Japan': 4, 'United States': 8, 'Brazil': 2, 'India': 7
    };
    return bestGoals[countryName] || Math.floor(Math.random() * 17) + 1;
}

function getWorstGoal(countryName) {
    const worstGoals = {
        'Finland': 12, 'Sweden': 12, 'Denmark': 13, 'Germany': 13,
        'Japan': 5, 'United States': 13, 'Brazil': 1, 'India': 2
    };
    return worstGoals[countryName] || Math.floor(Math.random() * 17) + 1;
}

function getSDGIcon(number) {
    const icons = ['ðŸ ', 'ðŸŽ', 'â¤ï¸', 'ðŸŽ“', 'âš–ï¸', 'ðŸ’§', 'â˜€ï¸', 'ðŸ’¼', 'ðŸ­', 'âš–ï¸',
                   'ðŸ™ï¸', 'â™»ï¸', 'ðŸŒ±', 'ðŸŒŠ', 'ðŸŒ³', 'âš–ï¸', 'ðŸ¤'];
    return icons[number - 1] || 'ðŸŽ¯';
}

function addCountryToComparison(countryName) {
    let compareList = JSON.parse(localStorage.getItem('sdgCompareList') || '[]');

    if (!compareList.includes(countryName)) {
        if (compareList.length >= 4) {
            alert('Maximum 4 countries in comparison. Remove some from Compare page.');
            return;
        }
        compareList.push(countryName);
        localStorage.setItem('sdgCompareList', JSON.stringify(compareList));

        // Show notification
        showCountryNotification(`${countryName} added to comparison list!`, 'success');
    } else {
        showCountryNotification(`${countryName} is already in comparison list`, 'warning');
    }

    // Close modal after 1 second
    setTimeout(() => {
        const modal = document.querySelector('div[style*="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95)"]');
        if (modal) modal.remove();

        // Redirect to compare page
        window.location.href = 'compare.html';
    }, 1000);
}

function shareCountryProfile(countryName) {
    const url = `https://sdgtracker2030.com/country/${countryName.toLowerCase().replace(/ /g, '-')}`;
    const text = `Check out ${countryName}'s SDG progress on the Global SDG Tracker!`;

    if (navigator.share) {
        navigator.share({
            title: `${countryName} - SDG Progress`,
            text: text,
            url: url
        });
    } else {
        navigator.clipboard.writeText(text + '\n' + url);
        showCountryNotification('Profile link copied to clipboard!', 'info');
    }
}

function showCountryNotification(message, type) {
    const colors = {
        'success': '#4CAF50',
        'warning': '#FF9800',
        'info': '#00bcd4'
    };

    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${colors[type] || '#00bcd4'};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        z-index: 10001;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideInRight 0.3s ease-out;
    `;

    notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
        <div>${message}</div>
    `;

    document.body.appendChild(notification);

    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-out forwards';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}
function getRegionRank(countryName, region) {
    const regionCountries = allCountriesData.filter(c => c.region === region);
    regionCountries.sort((a, b) => b.score - a.score);
    const rank = regionCountries.findIndex(c => c.name === countryName) + 1;
    return `#${rank} in ${region}`;
}

function addToComparison(countryName) {
    alert(`${countryName} added to comparison list! Visit the Compare page to view.`);
    // Store in localStorage for cross-page comparison
    localStorage.setItem('compareCountry', countryName);
}
        // Helper functions
        const sdgColors = ["#E5243B", "#DDA63A", "#4C9F38", "#C5192D", "#FF3A21", "#26BDE2", "#FCC30B", "#A21942", "#FD6925", "#DD1367", "#FD9D24", "#BF8B2E", "#3F7E44", "#0A97D9", "#56C02B", "#00689D", "#19486A"];

        function getRegionRank(countryName, region) {
            const regionCountries = allCountriesData.filter(c => c.region === region);
            regionCountries.sort((a, b) => b.score - a.score);
            return regionCountries.findIndex(c => c.name === countryName) + 1;
        }

        function downloadReport(countryName) {
            alert(`Downloading detailed SDG report for ${countryName}...\n(PDF would be generated in real application)`);
        }

        function compareCountry(countryName) {
            alert(`${countryName} has been added to comparison list!\nSwitch to Compare page to view.`);
            localStorage.setItem('compareCountry', countryName);
        }

        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', () => {
                renderTable(1);
            });

            document.getElementById('regionFilter').addEventListener('change', () => {
                renderTable(1);
            });

            document.getElementById('sortBy').addEventListener('change', () => {
                renderTable(1);
            });
        }
        // Mobile touch fixes
if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
    document.querySelectorAll('button, a, .nav-link').forEach(el => {
        el.style.minHeight = '44px';
        el.style.padding = '12px';
    });
}
    </script>
</body>
</html>