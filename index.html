<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Global SDG Tracker 2030 | Real-Time Sustainable Development Progress</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@800;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<link rel="icon" type="image/png" href="favicon.png">
    <style>
        :root {
            --primary: #1a237e;
            --secondary: #00bcd4;
            --accent: #4caf50;
            --dark: #0d1b2a;
            --light: #f8f9fa;
            --danger: #e53935;
            --warning: #ff9800;
            --success: #43a047;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        /* MOBILE FIRST FIXES */
@media (max-width: 768px) {
    .container { padding: 10px; }
    .dashboard { display: block !important; }
    .card { width: 100% !important; margin-bottom: 15px !important; }
    header { flex-direction: column; text-align: center; gap: 15px; }
    .nav-controls { flex-direction: column; width: 100%; }
    .nav-link, .control-btn { width: 100%; text-align: center; }
    .sdg-grid { grid-template-columns: repeat(2, 1fr) !important; }
    #mapContainer { height: 300px !important; }
    .countries-grid { grid-template-columns: 1fr !important; }
    .table-header, .table-row { grid-template-columns: 30px 1fr 80px !important; font-size: 0.8rem; }
    div[style*="position: fixed"] > div { width: 95% !important; padding: 20px !important; margin: 10px; }
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
    .sdg-grid { grid-template-columns: repeat(3, 1fr) !important; }
    .countries-grid { grid-template-columns: repeat(2, 1fr) !important; }
}

/* Desktop restore */
@media (min-width: 1025px) {
    .dashboard { display: grid !important; }
    header { flex-direction: row; }
    .nav-controls { flex-direction: row; width: auto; }
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.8rem;
            color: var(--secondary);
            animation: pulse 2s infinite;
        }

        .logo h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 2.2rem;
            background: linear-gradient(45deg, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-controls {
            display: flex;
            gap: 15px;
        }

        .nav-link {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            text-decoration: none;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Map Container */
        #mapContainer {
            height: 400px;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .leaflet-container {
            background: #1e3c72 !important;
            font-family: 'Poppins', sans-serif;
        }

        /* SDG Grid */
        .sdg-grid {
            grid-column: span 12;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 1200px) {
            .sdg-grid { grid-template-columns: repeat(4, 1fr); }
        }
        @media (max-width: 768px) {
            .sdg-grid { grid-template-columns: repeat(3, 1fr); }
        }

        .sdg-goal {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }

        .sdg-goal:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .nav-controls {
                flex-wrap: wrap;
            }
        }
        @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.pulse-animation {
    animation: pulse 2s infinite;
}

/* Add glow effect to important metrics */
.glow {
    text-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
}


    </style>
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-globe-americas"></i>
                <div>
                    <h1>SDG TRACKER 2030</h1>
                    <p>Monitoring Global Progress Towards Sustainable Development Goals</p>
                </div>
            </div>
            <div class="nav-controls">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="all-countries.html" class="nav-link">
                    <i class="fas fa-list"></i> All Countries
                </a>
                <a href="compare.html" class="nav-link">
                    <i class="fas fa-chart-bar"></i> Compare
                </a>
                <button class="nav-link" id="downloadBtn">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </header>

        <main class="dashboard">
            <!-- Global Progress Card -->
            <section class="card" style="grid-column: span 4;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-globe-americas"></i> Global Overview</h2>
                    <span style="background: linear-gradient(135deg, #00bcd4, #4caf50); padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">
                        2030 Agenda
                    </span>
                </div>

                <!-- Animated Progress Circle -->
                <div style="position: relative; width: 180px; height: 180px; margin: 0 auto 25px;">
                    <svg width="180" height="180" viewBox="0 0 180 180">
                        <defs>
                            <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#00bcd4" />
                                <stop offset="100%" stop-color="#4caf50" />
                            </linearGradient>
                        </defs>
                        <circle cx="90" cy="90" r="75" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="10"></circle>
                        <circle id="animatedProgress" cx="90" cy="90" r="75" fill="none" stroke="url(#progressGradient)"
                                stroke-width="10" stroke-linecap="round" stroke-dasharray="471" stroke-dashoffset="471"
                                transform="rotate(-90 90 90)"></circle>
                    </svg>
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                        <div style="font-size: 2.8rem; font-weight: 800; background: linear-gradient(45deg, #00bcd4, #4caf50); -webkit-background-clip: text; background-clip: text; color: transparent;">
                            65%
                        </div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 5px;">Complete</div>
                    </div>
                </div>

                <!-- Progress Stats -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                    <div style="text-align: center; padding: 15px; background: rgba(76,175,80,0.1); border-radius: 10px;">
                        <div style="font-size: 1.8rem; font-weight: 700; color: #4CAF50;">8</div>
                        <div style="font-size: 0.85rem; opacity: 0.9;">On Track</div>
                        <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 5px;">47% of goals</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,152,0,0.1); border-radius: 10px;">
                        <div style="font-size: 1.8rem; font-weight: 700; color: #FF9800;">6</div>
                        <div style="font-size: 0.85rem; opacity: 0.9;">Moderate</div>
                        <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 5px;">35% of goals</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(244,67,54,0.1); border-radius: 10px;">
                        <div style="font-size: 1.8rem; font-weight: 700; color: #F44336;">3</div>
                        <div style="font-size: 0.85rem; opacity: 0.9;">Lagging</div>
                        <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 5px;">18% of goals</div>
                    </div>
                </div>

                <!-- Additional Metrics -->
                <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-size: 0.9rem; opacity: 0.8;">Years to 2030</span>
                        <span style="font-weight: 600;">6 years</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-size: 0.9rem; opacity: 0.8;">Annual Progress Needed</span>
                        <span style="font-weight: 600; color: #4CAF50;">5.8%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-size: 0.9rem; opacity: 0.8;">Current Progress Rate</span>
                        <span style="font-weight: 600; color: #FF9800;">2.1%</span>
                    </div>
                </div>
            </section>

            <!-- World Map Card -->
            <section class="card" style="grid-column: span 8;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-map-marked-alt"></i> Global SDG Performance Map</h2>
                    <div style="font-size: 0.9rem; opacity: 0.8;"></div>
                </div>

                <div id="mapContainer"></div>

                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #4CAF50; border-radius: 50%;"></div>
                        <span style="font-size: 0.8rem;">80+ (Excellent)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #8BC34A; border-radius: 50%;"></div>
                        <span style="font-size: 0.8rem;">70-79 (Good)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #FFC107; border-radius: 50%;"></div>
                        <span style="font-size: 0.8rem;">60-69 (Moderate)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 12px; height: 12px; background: #F44336; border-radius: 50%;"></div>
                        <span style="font-size: 0.8rem;">Below 60</span>
                    </div>
                </div>
            </section>

            <!-- SDG Goals Grid -->
            <section class="card" style="grid-column: span 12;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-bullseye"></i> Sustainable Development Goals</h2>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Click any goal for details</div>
                </div>
                <div class="sdg-grid" id="sdgGrid"></div>
            </section>

            <!-- Top Countries -->
            <section class="card" style="grid-column: span 12;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-trophy"></i> Top Performing Countries</h2>
                    <a href="all-countries.html" class="nav-link" style="padding: 8px 20px;">
                        View All <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                <div id="topCountries" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;"></div>
            </section>
        </main>

        <footer>
            <p>Â© 2024 Global SDG Tracker | by jsjsajanisaac</p>
            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 15px;">
                <i class="fas fa-database"></i>
                <span>Data Sources: UN Statistics, Sustainable Development Report</span>
            </div>
        </footer>
    </div>

    <script>
        // SDG Data
        const sdgData = [
            { number: 1, name: "No Poverty", color: "#E5243B", icon: "fas fa-home", progress: 23, trend: "up" },
            { number: 2, name: "Zero Hunger", color: "#DDA63A", icon: "fas fa-apple-alt", progress: 15, trend: "down" },
            { number: 3, name: "Good Health", color: "#4C9F38", icon: "fas fa-heartbeat", progress: 35, trend: "up" },
            { number: 4, name: "Quality Education", color: "#C5192D", icon: "fas fa-graduation-cap", progress: 42, trend: "up" },
            { number: 5, name: "Gender Equality", color: "#FF3A21", icon: "fas fa-venus", progress: 28, trend: "stable" },
            { number: 6, name: "Clean Water", color: "#26BDE2", icon: "fas fa-tint", progress: 31, trend: "up" },
            { number: 7, name: "Clean Energy", color: "#FCC30B", icon: "fas fa-sun", progress: 45, trend: "up" },
            { number: 8, name: "Decent Work", color: "#A21942", icon: "fas fa-briefcase", progress: 38, trend: "up" },
            { number: 9, name: "Innovation", color: "#FD6925", icon: "fas fa-industry", progress: 27, trend: "down" },
            { number: 10, name: "Reduced Inequality", color: "#DD1367", icon: "fas fa-balance-scale", progress: 19, trend: "down" },
            { number: 11, name: "Sustainable Cities", color: "#FD9D24", icon: "fas fa-city", progress: 33, trend: "up" },
            { number: 12, name: "Responsible Consumption", color: "#BF8B2E", icon: "fas fa-recycle", progress: 21, trend: "stable" },
            { number: 13, name: "Climate Action", color: "#3F7E44", icon: "fas fa-leaf", progress: 18, trend: "down" },
            { number: 14, name: "Life Below Water", color: "#0A97D9", icon: "fas fa-water", progress: 25, trend: "up" },
            { number: 15, name: "Life On Land", color: "#56C02B", icon: "fas fa-tree", progress: 29, trend: "stable" },
            { number: 16, name: "Peace & Justice", color: "#00689D", icon: "fas fa-gavel", progress: 32, trend: "up" },
            { number: 17, name: "Partnerships", color: "#19486A", icon: "fas fa-handshake", progress: 40, trend: "up" }
        ];

        // Country data
        const countries = [
            { name: "Finland", code: "FI", score: 86.8, trend: "up", flag: "ðŸ‡«ðŸ‡®", region: "Europe", rank: 1, population: "5.5M", gdp: "$48,800" },
            { name: "Sweden", code: "SE", score: 86.0, trend: "up", flag: "ðŸ‡¸ðŸ‡ª", region: "Europe", rank: 2, population: "10.4M", gdp: "$52,300" },
            { name: "Denmark", code: "DK", score: 85.6, trend: "stable", flag: "ðŸ‡©ðŸ‡°", region: "Europe", rank: 3, population: "5.8M", gdp: "$61,500" },
            { name: "Germany", code: "DE", score: 83.5, trend: "up", flag: "ðŸ‡©ðŸ‡ª", region: "Europe", rank: 4, population: "83.2M", gdp: "$51,400" },
            { name: "Japan", code: "JP", score: 79.4, trend: "up", flag: "ðŸ‡¯ðŸ‡µ", region: "Asia", rank: 19, population: "125.7M", gdp: "$42,200" },
            { name: "United States", code: "US", score: 75.9, trend: "stable", flag: "ðŸ‡ºðŸ‡¸", region: "North America", rank: 32, population: "331.9M", gdp: "$63,400" },
            { name: "Brazil", code: "BR", score: 73.8, trend: "down", flag: "ðŸ‡§ðŸ‡·", region: "South America", rank: 55, population: "213.3M", gdp: "$14,600" },
            { name: "India", code: "IN", score: 66.2, trend: "up", flag: "ðŸ‡®ðŸ‡³", region: "Asia", rank: 112, population: "1.38B", gdp: "$6,700" }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderSDGGrid();
            renderTopCountries();
            createMap();
            setupEventListeners();
            // Animate progress circle
            setTimeout(() => {
                const circle = document.getElementById('animatedProgress');
                circle.style.transition = 'stroke-dashoffset 2s ease-in-out';
                circle.style.strokeDashoffset = '165'; // For 65% progress
            }, 500);
        });

        // Render SDG Grid
        function renderSDGGrid() {
            const grid = document.getElementById('sdgGrid');
            grid.innerHTML = '';

            sdgData.forEach(sdg => {
                const goalElement = document.createElement('div');
                goalElement.className = 'sdg-goal fade-in';
                goalElement.style.borderLeft = `4px solid ${sdg.color}`;
                goalElement.innerHTML = `
                    <div style="color: ${sdg.color}; font-size: 1.8rem; margin-bottom: 10px;">
                        <i class="${sdg.icon}"></i>
                    </div>
                    <div style="font-weight: 700; color: ${sdg.color};">SDG ${sdg.number}</div>
                    <div style="font-size: 0.8rem; margin: 5px 0;">${sdg.name}</div>
                    <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-top: 15px;">
                        <div style="height: 100%; width: ${sdg.progress}%; background: ${sdg.color}; border-radius: 3px;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem;">
                        <span>${sdg.progress}%</span>
                        <span style="color: ${sdg.trend === 'up' ? '#4CAF50' : sdg.trend === 'down' ? '#F44336' : '#FF9800'}">
                            <i class="fas fa-arrow-${sdg.trend}"></i>
                        </span>
                    </div>
                `;

                goalElement.addEventListener('click', () => {
                    showGoalDetails(sdg);
                });

                grid.appendChild(goalElement);
            });
        }
        //Helper function for GDP
        function getGDPPerCapita(countryName) {
            const gdpData = {
                'Finland': '$48,800', 'Sweden': '$52,300', 'Denmark': '$61,500',
                'Germany': '$51,400', 'Japan': '$42,200', 'United States': '$63,400',
                'Brazil': '$14,600', 'India': '$6,700', 'China': '$10,500',
                'France': '$42,000', 'Norway': '$67,900', 'Netherlands': '$52,300',
                'Canada': '$48,700', 'Australia': '$55,000', 'South Korea': '$33,000'
            };
            return gdpData[countryName] || '$--';
        }
        // Render Top Countries
        function renderTopCountries() {
            const container = document.getElementById('topCountries');
            container.innerHTML = '';

            countries.slice(0, 6).forEach(country => {
                const card = document.createElement('div');
                card.className = 'card';
                card.style.padding = '20px';
                card.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div style="font-size: 2rem;">${country.flag}</div>
                        <div>
                            <div style="font-weight: 600; font-size: 1.1rem;">${country.name}</div>
                            <div style="font-size: 0.8rem; opacity: 0.7;">${country.region} â€¢ Rank #${country.rank}</div>
                        </div>
                        <div style="margin-left: auto; padding: 5px 12px; background: ${country.trend === 'up' ? 'rgba(76,175,80,0.2)' : 'rgba(244,67,54,0.2)'}; border-radius: 20px; color: ${country.trend === 'up' ? '#4CAF50' : '#F44336'}">
                            <i class="fas fa-arrow-${country.trend}"></i>
                        </div>
                    </div>
                    <div style="font-size: 2rem; font-weight: 700; text-align: center; margin: 15px 0; background: linear-gradient(45deg, #00bcd4, #4caf50); -webkit-background-clip: text; background-clip: text; color: transparent;">
                        ${country.score}
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; opacity: 0.8;">
                        <div>
                            <div>Population</div>
                            <div style="font-weight: 600;">${country.population}</div>
                        </div>
                        <div>
                            <div>GDP Per Capita</div>
                            <div style="font-weight: 600;">${country.gdp}</div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // Create Interactive Map
        function createMap() {
            const map = L.map('mapContainer').setView([20, 0], 2);

            // Use OpenStreetMap English tiles

            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: 'Â© OpenStreetMap, Â© CartoDB',
                maxZoom: 5,
                minZoom: 2,
                detectRetina: true
            }).addTo(map);

            // Country coordinates and data
            const countryData = {
                'Finland': { coords: [64, 26], score: 86.8, color: '#4CAF50' },
                'Sweden': { coords: [62, 15], score: 86.0, color: '#4CAF50' },
                'Denmark': { coords: [56, 10], score: 85.6, color: '#4CAF50' },
                'Germany': { coords: [51, 10], score: 83.5, color: '#4CAF50' },
                'France': { coords: [46, 2], score: 81.2, color: '#8BC34A' },
                'United Kingdom': { coords: [55, -3], score: 80.8, color: '#8BC34A' },
                'Japan': { coords: [36, 138], score: 79.4, color: '#8BC34A' },
                'United States': { coords: [37, -95], score: 75.9, color: '#FFC107' },
                'Canada': { coords: [56, -106], score: 82.0, color: '#8BC34A' },
                'Brazil': { coords: [-15, -55], score: 73.8, color: '#FFC107' },
                'China': { coords: [35, 105], score: 72.1, color: '#FFC107' },
                'India': { coords: [20, 78], score: 66.2, color: '#F44336' },
                'Australia': { coords: [-25, 133], score: 77.8, color: '#8BC34A' },
                'South Africa': { coords: [-30, 25], score: 63.5, color: '#F44336' },
                'Nigeria': { coords: [9, 8], score: 58.7, color: '#F44336' },
                'Russia': { coords: [61, 105], score: 71.4, color: '#FFC107' }
            };

            // Add markers
            Object.keys(countryData).forEach(country => {
                const data = countryData[country];
                const marker = L.marker(data.coords, {
                    icon: L.divIcon({
                        className: 'custom-marker',
                        html: `<div style="background:${data.color}; width:15px; height:15px; border-radius:50%; border:2px solid white; box-shadow:0 0 10px rgba(0,0,0,0.5);"></div>`,
                        iconSize: [15, 15]
                    })
                }).addTo(map);

                marker.bindPopup(`
                    <div style="padding: 10px; font-family: 'Poppins', sans-serif; color: #333;">
                        <h4 style="margin: 0 0 10px 0; color: #1a237e;">${country}</h4>
                        <div style="margin-bottom: 8px;">
                            <span style="font-weight: 600;">SDG Score: </span>
                            <span style="color: ${data.color}; font-weight: 700;">${data.score}/100</span>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="font-weight: 600;">Region: </span>
                            <span>${getRegion(country)}</span>
                        </div>
                        <button onclick="viewCountry('${country}')"
                                style="width: 100%; padding: 8px; background: #00bcd4; color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px;">
                            View Details
                        </button>
                    </div>
                `);
            });

            // Add legend
            const legend = L.control({ position: 'bottomright' });
            legend.onAdd = function() {
                const div = L.DomUtil.create('div', 'info legend');
                div.style.background = 'white';
                div.style.padding = '15px';
                div.style.borderRadius = '8px';
                div.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
                div.style.color = '#333';
                div.innerHTML = `
                    <h4 style="margin: 0 0 10px 0; color: #1a237e;">SDG Score</h4>
                    <div style="display:flex; align-items:center; margin-bottom:8px;">
                        <div style="width:12px; height:12px; background:#4CAF50; border-radius:50%; margin-right:8px;"></div>
                        <span>80-100 (Excellent)</span>
                    </div>
                    <div style="display:flex; align-items:center; margin-bottom:8px;">
                        <div style="width:12px; height:12px; background:#8BC34A; border-radius:50%; margin-right:8px;"></div>
                        <span>70-79 (Good)</span>
                    </div>
                    <div style="display:flex; align-items:center; margin-bottom:8px;">
                        <div style="width:12px; height:12px; background:#FFC107; border-radius:50%; margin-right:8px;"></div>
                        <span>60-69 (Moderate)</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <div style="width:12px; height:12px; background:#F44336; border-radius:50%; margin-right:8px;"></div>
                        <span>Below 60</span>
                    </div>
                `;
                return div;
            };
            legend.addTo(map);
        }

        function getRegion(country) {
            const regions = {
                'Finland': 'Europe', 'Sweden': 'Europe', 'Denmark': 'Europe',
                'Germany': 'Europe', 'France': 'Europe', 'United Kingdom': 'Europe',
                'Japan': 'Asia', 'China': 'Asia', 'India': 'Asia',
                'United States': 'North America', 'Canada': 'North America',
                'Brazil': 'South America', 'Australia': 'Oceania',
                'South Africa': 'Africa', 'Nigeria': 'Africa', 'Russia': 'Europe/Asia'
            };
            return regions[country] || 'Unknown';
        }

        function viewCountry(countryName) {
            window.location.href = `all-countries.html?country=${encodeURIComponent(countryName)}`;
        }

        // Show Goal Details Modal (Fixed)
        function showGoalDetails(goal) {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.background = 'rgba(0,0,0,0.9)';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            modal.style.zIndex = '10000';
            modal.style.backdropFilter = 'blur(10px)';

            modal.innerHTML = `
            <div style="background: linear-gradient(135deg, #1e3c72, #2a5298); width: 90%; max-width: 700px; border-radius: 20px; padding: 25px; position: relative; border: 2px solid ${goal.color}; max-height: 85vh; overflow: hidden; display: flex; flex-direction: column;">
                <button onclick="this.parentElement.parentElement.remove()"
                        style="position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.3); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; z-index: 10001; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-times"></i>
                </button>

                <!-- Header -->
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; flex-shrink: 0;">
                    <div style="font-size: 2.5rem; color: ${goal.color}">
                        <i class="${goal.icon}"></i>
                    </div>
                    <div>
                        <h2 style="font-size: 1.6rem; margin: 0;">SDG ${goal.number}: ${goal.name}</h2>
                        <div style="opacity: 0.9; font-size: 0.9rem;">Global Progress: ${goal.progress}%</div>
                    </div>
                </div>

                <!-- Scrollable Content -->
                <div style="flex: 1; overflow-y: auto; padding-right: 10px;">
                    <!-- Progress Section -->
                    <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0; font-size: 1.1rem;"><i class="fas fa-chart-line"></i> Progress Analysis</h3>
                            <div style="font-size: 0.9rem; padding: 4px 12px; border-radius: 20px; background: ${goal.trend === 'up' ? 'rgba(76,175,80,0.2)' : 'rgba(244,67,54,0.2)'}; color: ${goal.trend === 'up' ? '#4CAF50' : '#F44336'}">
                                <i class="fas fa-arrow-${goal.trend}"></i> ${goal.trend === 'up' ? 'Improving' : 'Declining'}
                            </div>
                        </div>

                        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                            <div style="flex: 1;">
                                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">Global Average</div>
                                <div style="font-size: 2rem; font-weight: 700; color: ${goal.color}">${goal.progress}%</div>
                            </div>
                            <div style="flex: 2;">
                                <div style="height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                    <div style="height: 100%; width: ${goal.progress}%; background: ${goal.color}; border-radius: 4px;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">
                                    <span>0%</span>
                                    <span>Target: 100%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Key Indicators -->
                        <!-- Action Buttons -->
<div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; margin-top: 30px;">
    <a href="https://sdgs.un.org/goals/goal${goal.number}" target="_blank"
       style="padding: 15px; background: ${goal.color}; color: white; border: none;
              border-radius: 10px; cursor: pointer; font-weight: 600;
              text-decoration: none; display: flex; align-items: center;
              justify-content: center; gap: 10px;">
        <i class="fas fa-external-link-alt"></i>
        <span>Official UN SDG ${goal.number} Page</span>
    </a>

    <div style="display: flex; gap: 10px;">
        <button onclick="saveSDGToFavorites(${goal.number}, '${goal.name}')"
                style="padding: 15px; background: rgba(255,255,255,0.1); color: white;
                       border: 1px solid rgba(255,255,255,0.3); border-radius: 10px;
                       cursor: pointer; font-weight: 600; display: flex;
                       align-items: center; justify-content: center;">
            <i class="fas fa-star"></i>
        </button>

        <button onclick="shareSDGGoal(${goal.number}, '${goal.name}')"
                style="padding: 15px; background: rgba(0,188,212,0.2); color: #00bcd4;
                       border: 1px solid #00bcd4; border-radius: 10px;
                       cursor: pointer; font-weight: 600; display: flex;
                       align-items: center; justify-content: center;">
            <i class="fas fa-share-alt"></i>
        </button>
    </div>
</div>

<!-- Additional Resources -->
<div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
    <h4 style="margin-bottom: 15px; font-size: 1rem;"><i class="fas fa-link"></i> Additional Resources</h4>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
        <a href="https://unstats.un.org/sdgapi/v1/sdg/Goal/${goal.number}/Target/List"
           target="_blank"
           style="padding: 10px; background: rgba(255,255,255,0.05);
                  border-radius: 8px; color: white; text-decoration: none;
                  font-size: 0.85rem; display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-bullseye"></i>
            <span>View Targets</span>
        </a>
        <a href="https://sdg-tracker.org/${goal.number === 1 ? 'no-poverty' :
                                          goal.number === 2 ? 'zero-hunger' :
                                          goal.number === 3 ? 'good-health' :
                                          goal.name.toLowerCase().replace(/ /g, '-')}"
           target="_blank"
           style="padding: 10px; background: rgba(255,255,255,0.05);
                  border-radius: 8px; color: white; text-decoration: none;
                  font-size: 0.85rem; display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-chart-line"></i>
            <span>Interactive Data</span>
        </a>
    </div>
</div>
                    </div>

                    <!-- Top Countries -->
                    <div style="background: rgba(255,255,255,0.08); border-radius: 12px; padding: 20px;">
                        <h3 style="margin: 0 0 15px 0; font-size: 1.1rem;"><i class="fas fa-trophy"></i> Leading Countries</h3>
                        <div>
                            ${getTopCountriesForGoal(goal.number).map((country, index) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: ${index < 2 ? '1px solid rgba(255,255,255,0.05)' : 'none'}">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="font-size: 1.3rem;">${getCountryFlag(country.name)}</div>
                                        <div>
                                            <div style="font-weight: 600;">${country.name}</div>
                                            <div style="font-size: 0.8rem; opacity: 0.7;">${country.region}</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: 700; color: ${getScoreColor(country.score)}">${country.score}%</div>
                                        <div style="font-size: 0.7rem; opacity: 0.8;">Score</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Additional Info -->
                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                        <div style="font-size: 0.9rem; opacity: 0.8; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-info-circle"></i>
                            <span>Data from UN SDG 2023 Report â€¢ Updated quarterly</span>
                        </div>
                    </div>
                </div>

                <!-- Fixed Bottom Button -->
                <button style="margin-top: 20px; padding: 12px; background: ${goal.color}; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; flex-shrink: 0;">
                    <i class="fas fa-download"></i> Download Detailed Report
                </button>
            </div>
        `;

            document.body.appendChild(modal);
        }
        function getTopCountriesForGoal(goalNumber) {
            const leaders = {
                1: [{name: "Iceland", score: 95, region: "Europe"}, {name: "Finland", score: 92, region: "Europe"}, {name: "Norway", score: 90, region: "Europe"}],
                2: [{name: "Japan", score: 88, region: "Asia"}, {name: "Switzerland", score: 85, region: "Europe"}, {name: "Canada", score: 83, region: "North America"}],
                3: [{name: "Sweden", score: 96, region: "Europe"}, {name: "Norway", score: 94, region: "Europe"}, {name: "Japan", score: 92, region: "Asia"}],
                4: [{name: "Finland", score: 98, region: "Europe"}, {name: "South Korea", score: 95, region: "Asia"}, {name: "Canada", score: 92, region: "North America"}],
                5: [{name: "Iceland", score: 93, region: "Europe"}, {name: "Norway", score: 90, region: "Europe"}, {name: "Finland", score: 89, region: "Europe"}],
                6: [{name: "Switzerland", score: 96, region: "Europe"}, {name: "Austria", score: 94, region: "Europe"}, {name: "Germany", score: 92, region: "Europe"}],
                7: [{name: "Sweden", score: 95, region: "Europe"}, {name: "Denmark", score: 93, region: "Europe"}, {name: "Norway", score: 91, region: "Europe"}],
                8: [{name: "Germany", score: 94, region: "Europe"}, {name: "Switzerland", score: 92, region: "Europe"}, {name: "Japan", score: 90, region: "Asia"}],
                9: [{name: "South Korea", score: 96, region: "Asia"}, {name: "Japan", score: 94, region: "Asia"}, {name: "Germany", score: 92, region: "Europe"}],
                10: [{name: "Norway", score: 91, region: "Europe"}, {name: "Denmark", score: 89, region: "Europe"}, {name: "Sweden", score: 87, region: "Europe"}],
                11: [{name: "Singapore", score: 95, region: "Asia"}, {name: "Japan", score: 93, region: "Asia"}, {name: "Switzerland", score: 91, region: "Europe"}],
                12: [{name: "Sweden", score: 88, region: "Europe"}, {name: "Switzerland", score: 86, region: "Europe"}, {name: "Austria", score: 84, region: "Europe"}],
                13: [{name: "Denmark", score: 92, region: "Europe"}, {name: "Sweden", score: 90, region: "Europe"}, {name: "Norway", score: 88, region: "Europe"}],
                14: [{name: "Australia", score: 86, region: "Oceania"}, {name: "New Zealand", score: 84, region: "Oceania"}, {name: "Canada", score: 82, region: "North America"}],
                15: [{name: "Finland", score: 93, region: "Europe"}, {name: "Sweden", score: 91, region: "Europe"}, {name: "Norway", score: 89, region: "Europe"}],
                16: [{name: "Denmark", score: 96, region: "Europe"}, {name: "Norway", score: 94, region: "Europe"}, {name: "Sweden", score: 92, region: "Europe"}],
                17: [{name: "Sweden", score: 94, region: "Europe"}, {name: "Denmark", score: 92, region: "Europe"}, {name: "Norway", score: 90, region: "Europe"}]
            };
            return leaders[goalNumber] || [{name: "Finland", score: 85, region: "Europe"}, {name: "Sweden", score: 83, region: "Europe"}, {name: "Denmark", score: 82, region: "Europe"}];
        }

        function getCountryFlag(country) {
            const flags = {
                "Finland": "ðŸ‡«ðŸ‡®", "Sweden": "ðŸ‡¸ðŸ‡ª", "Norway": "ðŸ‡³ðŸ‡´",
                "Denmark": "ðŸ‡©ðŸ‡°", "Iceland": "ðŸ‡®ðŸ‡¸", "Germany": "ðŸ‡©ðŸ‡ª",
                "Japan": "ðŸ‡¯ðŸ‡µ", "Switzerland": "ðŸ‡¨ðŸ‡­", "Canada": "ðŸ‡¨ðŸ‡¦",
                "Austria": "ðŸ‡¦ðŸ‡¹", "South Korea": "ðŸ‡°ðŸ‡·", "Singapore": "ðŸ‡¸ðŸ‡¬",
                "Australia": "ðŸ‡¦ðŸ‡º", "New Zealand": "ðŸ‡³ðŸ‡¿"
            };
            return flags[country] || "ðŸ³ï¸";
        }

        function getScoreColor(score) {
            if (score >= 80) return '#4CAF50';
            if (score >= 70) return '#8BC34A';
            if (score >= 60) return '#FFC107';
            if (score >= 50) return '#FF9800';
            return '#F44336';
        }

        function setupEventListeners() {
            document.getElementById('downloadBtn').addEventListener('click', showExportOptions);
        }
        // Feature 1: Real-time Data Updates Notification
function showDataUpdate() {
    const update = document.createElement('div');
    update.id = 'dataUpdate';
    update.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideIn 0.5s ease-out;
    `;

    update.innerHTML = `
        <i class="fas fa-sync-alt fa-spin"></i>
        <div>
            <div style="font-weight: 600;">Live Data Updated</div>
            <div style="font-size: 0.8rem; opacity: 0.9;">SDG scores refreshed 5 mins ago</div>
        </div>
        <button onclick="this.parentElement.remove()" style="margin-left: 10px; background: none; border: none; color: white; cursor: pointer;">
            <i class="fas fa-times"></i>
        </button>
    `;

    document.body.appendChild(update);

    // Auto-remove after 5 seconds
    setTimeout(() => {
        if (document.getElementById('dataUpdate')) {
            document.getElementById('dataUpdate').remove();
        }
    }, 5000);
}

// Feature 2: Progress Predictions
function showProgressPrediction() {
    const today = new Date();
    const target2030 = new Date('2030-01-01');
    const daysLeft = Math.ceil((target2030 - today) / (1000 * 60 * 60 * 24));
    const yearsLeft = (daysLeft / 365).toFixed(1);

    const prediction = document.createElement('div');
    prediction.innerHTML = `
        <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-top: 20px;">
            <h3 style="margin-bottom: 15px; font-size: 1.1rem;"><i class="fas fa-crystal-ball"></i> 2030 Prediction</h3>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                <div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Years Remaining</div>
                    <div style="font-size: 1.5rem; font-weight: 700; color: #FF9800;">${yearsLeft}</div>
                </div>
                <div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">Projected Completion</div>
                    <div style="font-size: 1.5rem; font-weight: 700; color: #4CAF50;">78%</div>
                </div>
            </div>
            <div style="margin-top: 15px; font-size: 0.85rem; opacity: 0.9;">
                Based on current trends, global SDG completion is projected to reach 78% by 2030.
            </div>
        </div>
    `;

    document.querySelector('.global-progress').appendChild(prediction);
}

// Feature 3: Country Achievement Badges
function addAchievementBadges() {
    const badges = {
        'Finland': { type: 'champion', icon: 'ðŸ†', text: 'SDG Champion 2023' },
        'Sweden': { type: 'innovator', icon: 'ðŸ’¡', text: 'Top Innovator' },
        'Denmark': { type: 'leader', icon: 'â­', text: 'Climate Leader' },
        'Germany': { type: 'economy', icon: 'ðŸ­', text: 'Green Economy' }
    };

    // Add badges to country cards
    document.querySelectorAll('.country-card').forEach(card => {
        const countryName = card.querySelector('h3').textContent;
        if (badges[countryName]) {
            const badge = document.createElement('div');
            badge.style.cssText = `
                position: absolute;
                top: -10px;
                right: 20px;
                background: linear-gradient(135deg, #FFD700, #FFA500);
                color: #333;
                padding: 5px 10px;
                border-radius: 15px;
                font-size: 0.7rem;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 5px;
                box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            `;
            badge.innerHTML = `${badges[countryName].icon} ${badges[countryName].text}`;
            card.style.position = 'relative';
            card.appendChild(badge);
        }
    });
}

// Feature 4: Interactive Timeline
function addSDGTimeline() {
    const timeline = document.createElement('div');
    timeline.innerHTML = `
        <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 25px; margin-top: 30px;">
            <h3 style="margin-bottom: 20px; font-size: 1.2rem;"><i class="fas fa-history"></i> SDG Progress Timeline</h3>
            <div style="display: flex; align-items: center; justify-content: space-between; position: relative; height: 40px;">
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px;"></div>
                ${[2015, 2018, 2021, 2024, 2027, 2030].map(year => `
                    <div style="position: relative; text-align: center;">
                        <div style="width: 12px; height: 12px; background: ${year <= 2024 ? '#4CAF50' : '#FF9800'}; border-radius: 50%; margin: 0 auto 5px;"></div>
                        <div style="font-size: 0.8rem; opacity: 0.8;">${year}</div>
                        ${year === 2024 ? '<div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); background: #00bcd4; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; white-space: nowrap;">Current</div>' : ''}
                    </div>
                `).join('')}
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.8rem; opacity: 0.7;">
                <span>SDGs Adopted</span>
                <span>Target: Full Achievement</span>
            </div>
        </div>
    `;

    // Add to dashboard
    const dashboard = document.querySelector('.dashboard');
    dashboard.appendChild(timeline);
}

function showExportOptions() {
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        backdrop-filter: blur(10px);
    `;

    modal.innerHTML = `
        <div style="background: linear-gradient(135deg, #1e3c72, #2a5298); width: 90%; max-width: 500px; border-radius: 20px; padding: 30px; position: relative; border: 2px solid #00bcd4;">
            <button onclick="this.parentElement.parentElement.remove()"
                    style="position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.3); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>

            <h2 style="margin-bottom: 25px; font-size: 1.5rem;"><i class="fas fa-download"></i> Export Options</h2>

            <div style="display: flex; flex-direction: column; gap: 15px;">
                <button onclick="exportData('csv')"
                        style="padding: 15px; background: rgba(0,188,212,0.2); border: 1px solid #00bcd4; border-radius: 10px; color: white; cursor: pointer; font-family: 'Poppins', sans-serif; text-align: left; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-file-csv"></i>
                    <div>
                        <div style="font-weight: 600;">Download as CSV</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">Excel compatible format</div>
                    </div>
                </button>

                <button onclick="exportData('json')"
                        style="padding: 15px; background: rgba(76,175,80,0.2); border: 1px solid #4CAF50; border-radius: 10px; color: white; cursor: pointer; font-family: 'Poppins', sans-serif; text-align: left; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-file-code"></i>
                    <div>
                        <div style="font-weight: 600;">Download as JSON</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">For developers & APIs</div>
                    </div>
                </button>

                <a href="https://unstats.un.org/sdgapi" target="_blank"
                   style="padding: 15px; background: rgba(255,152,0,0.2); border: 1px solid #FF9800; border-radius: 10px; color: white; text-decoration: none; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-database"></i>
                    <div>
                        <div style="font-weight: 600;">UN SDG API</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">Access official data sources</div>
                    </div>
                </a>

                <a href="https://sdgindex.org/reports/sustainable-development-report-2023/" target="_blank"
                   style="padding: 15px; background: rgba(156,39,176,0.2); border: 1px solid #9C27B0; border-radius: 10px; color: white; text-decoration: none; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-file-pdf"></i>
                    <div>
                        <div style="font-weight: 600;">SDG Index Report</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">Official 2023 PDF Report</div>
                    </div>
                </a>
            </div>

            <div style="margin-top: 25px; font-size: 0.85rem; opacity: 0.7; text-align: center;">
                Data updated: ${new Date().toLocaleDateString('en-US', {month: 'long', year: 'numeric'})}
            </div>
        </div>
    `;

    document.body.appendChild(modal);
}

function exportData(format) {
    const data = {
        timestamp: new Date().toISOString(),
        source: "SDG Tracker Dashboard",
        sdgData: sdgData,
        topCountries: countries.slice(0, 10)
    };

    let content, mimeType, filename;

    if (format === 'csv') {
        // Convert to CSV
        const headers = ['SDG Number', 'Goal Name', 'Progress %', 'Trend'];
        const rows = sdgData.map(g => [g.number, g.name, g.progress, g.trend]);
        content = [headers, ...rows].map(row => row.join(',')).join('\n');
        mimeType = 'text/csv';
        filename = `sdg_data_${new Date().toISOString().slice(0,10)}.csv`;
    } else {
        content = JSON.stringify(data, null, 2);
        mimeType = 'application/json';
        filename = `sdg_data_${new Date().toISOString().slice(0,10)}.json`;
    }

    const blob = new Blob([content], { type: mimeType });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    alert(`${format.toUpperCase()} file downloaded successfully!`);
}

// Call all new features after page loads
setTimeout(() => {
    showDataUpdate();
    showProgressPrediction();
    addAchievementBadges();
    addSDGTimeline();
}, 2000);


// Save SDG to Favorites
function saveSDGToFavorites(goalNumber, goalName) {
    let favorites = JSON.parse(localStorage.getItem('sdgFavorites') || '[]');
    const goal = { number: goalNumber, name: goalName };

    const exists = favorites.some(fav => fav.number === goalNumber);
    if (exists) {
        favorites = favorites.filter(fav => fav.number !== goalNumber);
        localStorage.setItem('sdgFavorites', JSON.stringify(favorites));
        showSDGNotification(`SDG ${goalNumber} removed from favorites`, 'info');
    } else {
        favorites.push(goal);
        localStorage.setItem('sdgFavorites', JSON.stringify(favorites));
        showSDGNotification(`SDG ${goalNumber} added to favorites!`, 'success');
    }

    // Update star icon color
    updateStarIcon(goalNumber, !exists);
}

// Share SDG Goal
function shareSDGGoal(goalNumber, goalName) {
    const url = `https://sdgs.un.org/goals/goal${goalNumber}`;
    const text = `Check out SDG ${goalNumber}: ${goalName} progress on the Global SDG Tracker!`;

    if (navigator.share) {
        navigator.share({
            title: `SDG ${goalNumber}: ${goalName}`,
            text: text,
            url: url
        });
    } else {
        navigator.clipboard.writeText(text + '\n' + url);
        showSDGNotification('SDG link copied to clipboard!', 'info');
    }
}

// Show Notification
function showSDGNotification(message, type) {
    const colors = {
        'success': '#4CAF50',
        'warning': '#FF9800',
        'info': '#00bcd4',
        'error': '#F44336'
    };

    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${colors[type] || '#00bcd4'};
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        z-index: 10001;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: slideInRight 0.3s ease-out;
    `;

    notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' :
                           type === 'warning' ? 'exclamation-triangle' :
                           type === 'error' ? 'exclamation-circle' :
                           'info-circle'}"></i>
        <div style="font-weight: 500;">${message}</div>
    `;

    document.body.appendChild(notification);

    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-out forwards';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Update star icon
function updateStarIcon(goalNumber, isFavorite) {
    const modal = document.querySelector('div[style*="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9)"]');
    if (modal) {
        const starBtn = modal.querySelector('button[onclick*="saveSDGToFavorites"]');
        if (starBtn) {
            starBtn.innerHTML = `<i class="fas fa-star${isFavorite ? '' : '-o'}"></i>`;
            starBtn.style.color = isFavorite ? '#FFD700' : 'white';
            starBtn.style.background = isFavorite ? 'rgba(255,215,0,0.1)' : 'rgba(255,255,255,0.1)';
            starBtn.style.borderColor = isFavorite ? '#FFD700' : 'rgba(255,255,255,0.3)';
        }
    }
}

// Load favorites on page load
function loadFavorites() {
    const favorites = JSON.parse(localStorage.getItem('sdgFavorites') || '[]');
    console.log('Favorite SDGs:', favorites);
}

// Mobile touch fixes
if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
    document.querySelectorAll('button, a, .nav-link').forEach(el => {
        el.style.minHeight = '44px';
        el.style.padding = '12px';
    });
}
// Call on page load
window.addEventListener('load', loadFavorites);

        // Make functions available globally
        window.viewCountry = viewCountry;
        window.showGoalDetails = showGoalDetails;
    </script>

</body>
</html>